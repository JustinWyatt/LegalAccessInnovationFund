@model LegalAccessInnovationFund.Web.Models.ViewModels.ProfileViewModel

@{
    ViewBag.Title = "ProfileView";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}


<div class="span12">
    <div class="row">
        <div class="span3">

        </div>
        <div class="span9">
            
        </div>
    </div>
</div>

@section scripts{
    <script>

        var app = angular.module('app', []);

        app.filter('startFrom', function () {
            return function (input, start) {
                if (input === undefined) {
                    return input;
                } else {
                    return input.slice(+start);
                }
            };
        });

        app.filter('range', function () {
            return function (input, total) {
                total = parseInt(total);
                for (var i = 0; i < total; i++) {
                    input.push(i);
                }
                return input;
            };
        });

        app.factory('Pagination', function () {

            var pagination = {};

            pagination.getNew = function (perPage) {

                perPage = perPage === undefined ? 5 : perPage;

                var paginator = {
                    numPages: 1,
                    perPage: perPage,
                    page: 0
                };

                paginator.prevPage = function () {
                    if (paginator.page > 0) {
                        paginator.page -= 1;
                    }
                };

                paginator.nextPage = function () {
                    if (paginator.page < paginator.numPages - 1) {
                        paginator.page += 1;
                    }
                };

                paginator.toPageId = function (id) {
                    if (id >= 0 && id <= paginator.numPages - 1) {
                        paginator.page = id;
                    }
                };

                return paginator;
            };

            return pagination;
        });

        app.controller('profileController', function ($http, $scope, Pagination) {


            var profileData = function () {
                $http.get('/profile/profileviewjs').then(function (result) {
                    $scope.pagination = Pagination.getNew(5);
                    $scope.profileData = result.data;
                });
            }


            profileData();

            $scope.pagination.numPages = Math.ceil($scope.profileData.length / $scope.pagination.perPage);

        });



    </script>
}
